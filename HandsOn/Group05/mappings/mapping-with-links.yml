prefixes:
  ont: "http://www.semanticweb.org/abuce/ontologies/2025/9/untitled-ontology-3/"
  : "http://airecalidadbcn.linkeddata.es/g05/resource/"
  xsd: "http://www.w3.org/2001/XMLSchema#"

sources:
  # Define la fuente de datos, en este caso tu CSV
  aire_csv:
    access: "2018-06-Juny-qualitat-aire-BCN-updated-with-links.csv"
    referenceFormulation: csv

mappings:
  # --- Mapeo para la clase Estacion ---
  estaciones:
    sources:
      - aire_csv # Usa la fuente definida arriba
    
    # SUJETO: Crea la URI de la Estacion
    # $(Columna) toma el valor de la columna del CSV
    s: :estacion-$(Codi_Estacio)
    
    # PREDICADO-OBJETO: Define las propiedades
    po:
      # rdf:type ont:Estacion
      - [ a, ont:Estacion ]
      
      # Propiedades de datos (Datatype properties)
      - [ ont:stationCode, $(Codi_Estacio)~xsd:int ]
      - [ ont:name, $(Nom_Estacio) ]
      - [ ont:latitude, $(Latitud)~xsd:float ]
      - [ ont:longitude, $(Longitud)~xsd:float ]

  # --- Mapeo para la clase Lectura ---
  lecturas:
    sources:
      - aire_csv # Usa la misma fuente
    
    # SUJETO: Crea la URI de la Lectura
    s: :lectura-$(Data)-$(Codi_Estacio)
    
    # PREDICADO-OBJETO: Define las propiedades
    po:
      # rdf:type ont:Lectura
      - [ a, ont:Lectura ]
      
      # Propiedades de datos (Datatype properties)
      - [ ont:date, $(Data) ]
      - [ ont:quality, $(Qualitat_General) ]
      - [ ont:no2Value, $(Valor_NO2)~xsd:int ]
      - [ ont:no2Quality, $(Qualitat_NO2) ]
      - [ ont:o3Value, $(Valor_O3)~xsd:int ]
      - [ ont:o3Quality, $(Qualitat_O3) ]
      - [ ont:pm10Value, $(Valor_PM10)~xsd:int ]
      - [ ont:pm10Quality, $(Qualitat_PM10) ]
      
      # Propiedad de objeto (Object property) - El enlace
      - p: ont:madeInStation
        o:
          # Apunta al otro mapeo (estaciones)
          mapping: estaciones
          # Define la condici√≥n de enlace (Join)
          join:
            child: "Codi_Estacio"
            parent: "Codi_Estacio"