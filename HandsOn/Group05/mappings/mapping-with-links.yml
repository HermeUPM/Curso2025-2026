prefixes:
  rr: "http://www.w3.org/ns/r2rml#"
  rml: "http://semweb.mmlab.be/ns/rml#"
  ql: "http://semweb.mmlab.be/ns/ql#"
  ex: "http://example.com/ns/airquality#"
  geo: "http://www.w3.org/2003/01/geo/wgs84_pos#"
  dct: "http://purl.org/dc/terms/"
  xsd: "http://www.w3.org/2001/XMLSchema#"

sources:
  stations:
    access: "csv/2018-06-Juny-qualitat-aire-BCN-updated-with-links.csv"
    referenceFormulation: ql:CSV
  readings:
    access: "csv/2018-06-Juny-qualitat-aire-BCN-updated-with-links.csv"
    referenceFormulation: ql:CSV

mappings:

  Station:
    sources: stations
    s: "http://example.com/ns/airquality#station/$(codi_eoi)"
    po:
      - [rdf:type, ex:AirQualityStation]
      - [rdfs:label, "$(nom_cabina)"]
      - [ex:stationCode, "$(codi_eoi)"]
      - [geo:lat, "$(latitud)", xsd:float]
      - [geo:long, "$(longitud)", xsd:float]

  Reading:
    sources: readings
    s: "http://example.com/ns/airquality#reading/$(codi_eoi)/$(generat)"
    po:
      - [rdf:type, ex:AirQualityReading]
      - [dct:issued, "$(generat)"]
      - [ex:overallQuality, "$(calidad_aire)"]

      - p: ex:o3_value
        o: "$(valor_o3)"
        datatype: xsd:integer

      - [ex:o3_quality, "$(calidad_o3)"]

      - p: ex:no2_value
        o: "$(valor_no2)"
        datatype: xsd:integer

      - [ex:no2_quality, "$(calidad_no2)"]

      - p: ex:pm10_value
        o: "$(valor_pm10)"
        datatype: xsd:integer

      - [ex:pm10_quality, "$(calidad_pm10)"]

      - p: ex:madeByStation
        o:
          mapping: Station
          condition:
            function: equal
            parameters:
              - [str1, "$(codi_eoi)"]
              - [str2, "$(codi_eoi)"]
